{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SanjeeviniCholin\\\\OneDrive - BDIPlus\\\\Desktop\\\\mini_subscription_application\\\\frontend\\\\src\\\\components\\\\CourseDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CourseDetail = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [course, setCourse] = useState(null);\n  const [promo, setPromo] = useState(\"\");\n  const [promoValid, setPromoValid] = useState(false);\n  const [discountPrice, setDiscountPrice] = useState(null);\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  useEffect(() => {\n    const fetchCourse = async () => {\n      try {\n        const res = await fetch(`http://localhost:5000/api/courses/${id}`);\n        const data = await res.json();\n        setCourse(data);\n      } catch (error) {\n        console.error(\"Failed to fetch course:\", error);\n      }\n    };\n    fetchCourse();\n  }, [id]);\n  const applyPromo = () => {\n    if (promo === \"BFSALE25\") {\n      const newPrice = course.price * 0.5;\n      setDiscountPrice(newPrice);\n      setPromoValid(true);\n    } else {\n      alert(\"Invalid promo code\");\n      setPromoValid(false);\n    }\n  };\n  const handleSubscribe = async () => {\n    try {\n      const payload = {\n        userId: user._id,\n        courseId: course._id,\n        promo: promo\n      };\n      const res = await fetch(\"http://localhost:5000/api/subscribe\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(payload)\n      });\n      const data = await res.json();\n      if (!res.ok) {\n        alert(data.message || \"Subscription failed\");\n        return;\n      }\n      alert(data.message);\n      navigate(\"/my-courses\");\n    } catch (error) {\n      alert(\"Subscription failed\");\n    }\n  };\n  if (!course) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"900px\",\n      margin: \"auto\",\n      padding: \"20px\"\n    },\n    children: [course.image && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: `http://localhost:5000/${course.image}`,\n      alt: course.title,\n      style: {\n        width: \"100%\",\n        borderRadius: \"12px\",\n        marginBottom: \"20px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: course.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: \"18px\",\n        marginTop: \"10px\"\n      },\n      children: course.fullDescription\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: \"20px\"\n      },\n      children: [\"Price:\", \" \", course.price === 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: \"green\"\n        },\n        children: \"FREE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u20B9\", course.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), course.price === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubscribe,\n      style: {\n        marginTop: \"20px\",\n        padding: \"10px 20px\"\n      },\n      children: \"Subscribe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this), course.price > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"30px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter Promo Code\",\n        value: promo,\n        onChange: e => setPromo(e.target.value),\n        style: {\n          padding: \"10px\",\n          width: \"60%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: applyPromo,\n        style: {\n          marginLeft: \"10px\"\n        },\n        children: \"Apply Promo Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this), promoValid && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: \"10px\",\n          color: \"green\"\n        },\n        children: [\"Promo applied! Discounted Price: \\u20B9\", discountPrice]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubscribe,\n        disabled: !promoValid,\n        style: {\n          marginTop: \"20px\",\n          padding: \"10px 20px\",\n          opacity: promoValid ? 1 : 0.5\n        },\n        children: \"Subscribe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(CourseDetail, \"s9CTzwvOO5NNAJTXI0AXyfUF8og=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CourseDetail;\nexport default CourseDetail;\nvar _c;\n$RefreshReg$(_c, \"CourseDetail\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","jsxDEV","_jsxDEV","CourseDetail","_s","id","navigate","course","setCourse","promo","setPromo","promoValid","setPromoValid","discountPrice","setDiscountPrice","user","JSON","parse","localStorage","getItem","fetchCourse","res","fetch","data","json","error","console","applyPromo","newPrice","price","alert","handleSubscribe","payload","userId","_id","courseId","method","headers","body","stringify","ok","message","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","padding","image","src","alt","title","width","borderRadius","marginBottom","fontSize","marginTop","fullDescription","color","onClick","type","placeholder","value","onChange","e","target","marginLeft","disabled","opacity","_c","$RefreshReg$"],"sources":["C:/Users/SanjeeviniCholin/OneDrive - BDIPlus/Desktop/mini_subscription_application/frontend/src/components/CourseDetail.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\n\r\nconst CourseDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [course, setCourse] = useState(null);\r\n  const [promo, setPromo] = useState(\"\");\r\n  const [promoValid, setPromoValid] = useState(false);\r\n  const [discountPrice, setDiscountPrice] = useState(null);\r\n\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n  useEffect(() => {\r\n    const fetchCourse = async () => {\r\n      try {\r\n        const res = await fetch(`http://localhost:5000/api/courses/${id}`);\r\n        const data = await res.json();\r\n        setCourse(data);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch course:\", error);\r\n      }\r\n    };\r\n\r\n    fetchCourse();\r\n  }, [id]);\r\n\r\n  const applyPromo = () => {\r\n    if (promo === \"BFSALE25\") {\r\n      const newPrice = course.price * 0.5;\r\n      setDiscountPrice(newPrice);\r\n      setPromoValid(true);\r\n    } else {\r\n      alert(\"Invalid promo code\");\r\n      setPromoValid(false);\r\n    }\r\n  };\r\n\r\n  const handleSubscribe = async () => {\r\n    try {\r\n      const payload = {\r\n        userId: user._id,\r\n        courseId: course._id,\r\n        promo: promo,\r\n      };\r\n\r\n      const res = await fetch(\"http://localhost:5000/api/subscribe\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        alert(data.message || \"Subscription failed\");\r\n        return;\r\n      }\r\n\r\n      alert(data.message);\r\n      navigate(\"/my-courses\");\r\n    } catch (error) {\r\n      alert(\"Subscription failed\");\r\n    }\r\n  };\r\n\r\n  if (!course) return <h2>Loading...</h2>;\r\n\r\n  return (\r\n    <div style={{ maxWidth: \"900px\", margin: \"auto\", padding: \"20px\" }}>\r\n      {/* Course Image */}\r\n      {course.image && (\r\n        <img\r\n          src={`http://localhost:5000/${course.image}`}\r\n          alt={course.title}\r\n          style={{ width: \"100%\", borderRadius: \"12px\", marginBottom: \"20px\" }}\r\n        />\r\n      )}\r\n\r\n      <h1>{course.title}</h1>\r\n      <p style={{ fontSize: \"18px\", marginTop: \"10px\" }}>\r\n        {course.fullDescription}\r\n      </p>\r\n\r\n      <h3 style={{ marginTop: \"20px\" }}>\r\n        Price:{\" \"}\r\n        {course.price === 0 ? (\r\n          <span style={{ color: \"green\" }}>FREE</span>\r\n        ) : (\r\n          <span>₹{course.price}</span>\r\n        )}\r\n      </h3>\r\n\r\n      {/* FREE COURSE */}\r\n      {course.price === 0 && (\r\n        <button\r\n          onClick={handleSubscribe}\r\n          style={{ marginTop: \"20px\", padding: \"10px 20px\" }}\r\n        >\r\n          Subscribe\r\n        </button>\r\n      )}\r\n\r\n      {/* PAID COURSE */}\r\n      {course.price > 0 && (\r\n        <div style={{ marginTop: \"30px\" }}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Enter Promo Code\"\r\n            value={promo}\r\n            onChange={(e) => setPromo(e.target.value)}\r\n            style={{ padding: \"10px\", width: \"60%\" }}\r\n          />\r\n\r\n          <button onClick={applyPromo} style={{ marginLeft: \"10px\" }}>\r\n            Apply Promo Code\r\n          </button>\r\n\r\n          {promoValid && (\r\n            <p style={{ marginTop: \"10px\", color: \"green\" }}>\r\n              Promo applied! Discounted Price: ₹{discountPrice}\r\n            </p>\r\n          )}\r\n\r\n          <button\r\n            onClick={handleSubscribe}\r\n            disabled={!promoValid}\r\n            style={{\r\n              marginTop: \"20px\",\r\n              padding: \"10px 20px\",\r\n              opacity: promoValid ? 1 : 0.5,\r\n            }}\r\n          >\r\n            Subscribe\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}